<app-toolbar>
    <mat-spinner *ngIf="isLoadingData" class="spinner"></mat-spinner>
    <ng-container *ngIf="!isLoadingData">
        <div class="content">
            <h1 class="content-menu">Pedidos de ajuda psicológica</h1>
            
            <mat-card class="psychologist-view">
                <mat-accordion displayMode="flat" multi class="mat-table">
                    <mat-expansion-panel 
                        *ngFor="let row of userData | async" 
                        class="cell-content"
                        (opened)="panelOpenState = true" 
                        (closed)="panelOpenState = false"
                    >
                      <mat-expansion-panel-header class="mat-row">
                        <span class="mat-cell">{{row.name}}</span>
                        <span class="mat-cell">
                            {{panelOpenState ?  'Ocultar detalhes': 'Exibir detalhes'}} 
                        </span>
                    </mat-expansion-panel-header>

                        <div *ngIf="row?.phone" class="mat-row-data">
                            <b>Telefone:</b> 
                            <div>
                                {{row.phone}}
                            </div>
                        </div>
                        <div *ngIf="row?.email" class="mat-row-data">
                            <b>Email:</b> 
                            <div>
                                {{row.email}}
                            </div>
                        </div>
                        <div class="btn-psychologist">
                            <button mat-raised-button (click)="helpVolunteer(row)">
                                Voluntário atendido
                            </button>
                        </div>

                    </mat-expansion-panel>
                </mat-accordion>
            </mat-card>
        </div>
        <app-footer></app-footer>
    </ng-container>
</app-toolbar>